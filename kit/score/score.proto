syntax = "proto3";
package score;
option go_package = "github.com/autograde/quickfeed/kit/score";

// Score give the score for a single test named TestName.
message Score {
    string Secret = 1;   // the unique identifier for a scoring session
    string TestName = 2; // name of the test
    int32 Score = 3;     // the score obtained
    int32 MaxScore = 4;  // max score possible to get on this specific test
    int32 Weight = 5;    // the weight of this test; used to compute final grade
}

// TODO(meling) Migrate Scores to Results?

// Scores holds a map from test names to score objects.
message Scores {
    repeated string TestNames = 1;   // defines the iteration order of the tests
    map<string, Score> ScoreMap = 2; // map from TestName to Score
}

// Results holds a map from test names to score objects and build info.
message Results {
    BuildInfo BuildInfo = 1;         // build info for tests
    repeated string TestNames = 2;   // defines the iteration order of the tests
    map<string, Score> ScoreMap = 3; // map from TestName to Score
}

//TODO(meling) Remove Result
// Result holds build information and scores for an assignment's test execution.
// Deprecated: Result should not be used
message Result {
    BuildInfo BuildInfo = 1;
    repeated Score Scores = 2;
}

// BuildInfo holds build data for an assignment's test execution.
message BuildInfo {
    int64 BuildID = 1;
    string BuildDate = 2;
    string BuildLog = 3;
    int64 ExecTime = 4;
}
